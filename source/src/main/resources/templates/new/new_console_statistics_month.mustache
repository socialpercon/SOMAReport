<!DOCTYPE html>
<html lang="ko" style="margin:0px;height:100%">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="No-Cache">
    <title>somareport</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="http://static.plusquare.com/somareport/theme_new.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.8/css/jquery.dataTables.min.css">
  </head>
  <body style="margin:0px;height:100%">
    <div style="height:80px;width:100%;background:#fff;position:absolute;z-index:1;">
      <div style="height:80px;width:15%;float:left;background:#6289D9">
        <table style="height:80px;margin-left:15px">
          <center>
          <tr>
            <td style="align:center">
              <img src="http://flamingonest.com/images/donatbalipapp_profile_circle.png" style="width:48px;height:48px;display:inline-block;">
            </td>
            <td style="align:center;padding-left:5px">
            <p style="margin:0;font-size:18px;color:rgba(255, 255, 255, 1);">{{name}}</p>
            <p style="margin:0;font-size:14px;color:rgba(255, 255, 255, 0.7);">{{role}}</p>
            </td>
          </tr>
          </center>
        </table>
      </div>
      <div style="height:80px;width:85%;float:right;background:#fff">
        <a href="/project/list" style="text-decoration:none;color:#000;display:inline-block">
        <table style="height:80px">
        <tr>
          <td>
            <i style="padding-left:24px;padding-right:24px" class="material-icons">arrow_back</i>
          </td>
          <td>
            <span style="font-size:28px;">통계</span>
          </td>
        </tr>
        </table>
        </a>
      </div>
    </div>
    <div style="height:100%;width:15%;float:left;background:#323845;">
    <div style="height:80px"></div>
    {{#project}}
    <a href="/project/{{_id}}" class="menu">
    <div style="height:60px;padding:0px 15px 0px 15px;background-color:#1D1F29;">
      <table>
        <tr>
          <td>
            <i class="material-icons" style="color:rgba(255, 255, 255, 0.3);">visibility</i>
          </td>
          <td>
            <p style="padding-left:5px;color:rgba(255, 255, 255, 0.7)">home</p>
          </td>
        </tr>
      </table>
    </div>
    </a>
    <a href="/report/list/{{_id}}" class="menu">
    <div style="height:60px;padding:0px 15px 0px 15px">
      <table>
        <tr>
          <td>
            <i class="material-icons" style="color:rgba(255, 255, 255, 0.3);">description</i>
          </td>
          <td>
            <p style="padding-left:5px;color:rgba(255, 255, 255, 0.7)">reports</p>
          </td>
        </tr>
      </table>
    </div>
    </a>
    <a href="/drive/folder/{{_id}}" class="menu">
    <div style="height:60px;padding:0px 15px 0px 15px">
      <table>
        <tr>
          <td>
            <i class="material-icons" style="color:rgba(255, 255, 255, 0.3);">folder</i>
          </td>
          <td>
            <p style="padding-left:5px;color:rgba(255, 255, 255, 0.7)">drive</p>
          </td>
        </tr>
      </table>
    </div>
    </a>
    {{/project}}
    </div>
    <div style="height:100%;width:85%;float:right;background:#F5F5F5;">
      <div style="height:100%;width:100%;background:#F5F5F5;">
        <div style="max-height:calc(100% - 160px);width:calc(100% - 60px);float:left;margin-top:110px;margin-bottom:30px;margin-left:20px;margin-right:20px;background:#FFF;overflow-y:auto;padding:10px;box-shadow: rgba(0,0,0,0.12) 0px 0px 3px;">
        <span style="font-size:16px;color:rgba(0, 0, 0, 0.54)">STATISTICS</span>
        <div class="divider">
        </div>
        <table style="width:100%">
          <tr>
            <td style="width:20%">
              <dl class="dropy">
                <dt class="dropy__title"><span style="font-size:14px">월별 통계</span></dt>
                <dd class="dropy__content">
                <ul>
                  <li><a class="dropy__header" style="font-size:14px">월별 통계</a></li>
                  <li><a href="/console/statistics/project" style="font-size:14px">프로젝트별 통계</a></li>
                </ul>
                </dd>
              </dl>
            </td>
            <td style="width:35%">
              <dl class="dropy">
                <dt class="dropy__title"><span style="font-size:14px">{{year}}{{^year}}2015{{/year}}</span></dt>
                <dd class="dropy__content">
                <ul>
                  <li><a href="#" onclick="changeYear(2015); return false;" style="font-size:14px">2015</a></li>
                  <li><a href="#" onclick="changeYear(2014); return false;" style="font-size:14px">2014</a></li>
                </ul>
                </dd>
              </dl>
            </td>
            <td style="width:35%">
              <dl class="dropy">
                <dt class="dropy__title"><span style="font-size:14px">{{month}}{{^month}}08{{/month}}</span></dt>
                <dd class="dropy__content">
                <ul>
                  <li><a href="#" onclick="changeMonth(8); return false;" style="font-size:14px">08</a></li>
                  <li><a href="#" onclick="changeMonth(7); return false;" style="font-size:14px">07</a></li>
                </ul>
                </dd>
              </dl>
            </td>
            <td style="width:10%">
              <button id="buttonHo" class="ui button" style="margin-top:0px;margin-left:10px;valign:center"><i style="padding-left:24px;padding-right:24px" class="material-icons">done</i></button>
            </td>
          </tr>
        </table>
     <div name="mentorTable">
        <table id="mentor" class="display dataTable compact" cellspacing="0" width="100%" height="30%">
          <thead>
            <tr><td><label>멘토</label></td></tr>
            <tr>
              <th class="sorting">이름</th>
              <th class="sorting">멘토링 횟수</th>
              <th class="sorting">멘토링 시간</th>
            </tr>
           </thead>
          <tbody>
          {{#mentors}}
            <tr>
             <td>{{userName}}</td>
              <td>{{mentoringNum}}</td>
              <td>{{mentoringSum}}</td>
            </tr>
          {{/mentors}}
          </tbody>
        </table>
      </div>
      <div name="menteeTable">
        <table id="mentee" class="display dataTable compact" cellspacing="0" width="100%" height="30%`">
          <thead>
            <tr><td><label>멘티</label></td></tr>
            <tr>
              <th class="sorting">이름</th>
              <th class="sorting">멘토링 횟수</th>
              <th class="sorting">멘토링 시간</th>
            </tr>
          </thead>
          <tbody>
          {{#mentees}}
            <tr>
              <td>{{userName}}</td>
              <td>{{mentoringNum}}</td>
              <td>{{mentoringSum}}</td>
            </tr>
          {{/mentees}}
          </tbody>
        </table>
        </div>
        <!-- -->
        </div>
      </div>
    </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.8/js/jquery.dataTables.min.js"></script>
    <script>
    var gYear = {{year}}{{^year}}2015{{/year}};
    var gMonth = {{month}}{{^month}}8{{/month}};

    function changeYear(y){
      gYear = y;
    }
    function changeMonth(m){
      gMonth = m;
    }
    $(document).ready(function() {
        $('#mentor').DataTable( {
            "scrollY":        "200px",
            "scrollCollapse": true,
            "paging":         false
        });
        $('#mentee').DataTable( {
            "scrollY":        "200px",
            "scrollCollapse": true,
            "paging":         false
        });
        $('#buttonHo').click(function(){
          console.log(gYear);
          console.log(gMonth);
          $(location).attr('href', '/console/statistics/perMonth?year='+gYear+'&month='+gMonth);
      });
    });
    var dropy = {
  $dropys: null,
  openClass: 'open',
  selectClass: 'selected',
  init: function(){
    var self = this;

    self.$dropys = $('.dropy');
    self.eventHandler();
  },
  eventHandler: function(){
    var self = this;

    // Opening a dropy
    self.$dropys.find('.dropy__title').click(function(){
      self.$dropys.removeClass(self.openClass);
      $(this).parents('.dropy').addClass(self.openClass);
    });

    // Click on a dropy list
    self.$dropys.find('.dropy__content ul li a').click(function(){
      var $that = $(this);
      var $dropy = $that.parents('.dropy');
      var $input = $dropy.find('input');
      var $title = $(this).parents('.dropy').find('.dropy__title span');

      // Remove selected class
      $dropy.find('.dropy__content a').each(function(){
        $(this).removeClass(self.selectClass);
      });

      // Update selected value
      $title.html($that.html());
      $input.val($that.attr('data-value')).trigger('change');

      // If back to default, remove selected class else addclass on right element
      if($that.hasClass('dropy__header')){
        $title.removeClass(self.selectClass);
        $title.html($title.attr('data-title'));
      }
      else{
        $title.addClass(self.selectClass);
        $that.addClass(self.selectClass);
      }

      // Close dropdown
      $dropy.removeClass(self.openClass);
    });

    // Close all dropdown onclick on another element
    $(document).bind('click', function(e){
      if (! $(e.target).parents().hasClass('dropy')){ self.$dropys.removeClass(self.openClass); }
    });
  }
};

$(function(){
  dropy.init();
});
    </script>
  </body>
</html>